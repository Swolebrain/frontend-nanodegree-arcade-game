(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};var _Thang2=require("./Thang");var _Thang3=_interopRequireDefault(_Thang2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Enemy=function(_Thang){_inherits(Enemy,_Thang);function Enemy(xc,yc,sp,fl){_classCallCheck(this,Enemy);var _this=_possibleConstructorReturn(this,(Enemy.__proto__||Object.getPrototypeOf(Enemy)).call(this,xc,yc,sp,"images/enemy-bug.png"));if(fl)_this.flip=fl;else _this.flip=false;_this.spriteWidth=101;_this.hitbox={minx:2,miny:78,maxx:110,maxy:143};return _this}_createClass(Enemy,[{key:"update",value:function update(dt){dt=dt%300;if(this.flip)this.x-=dt*this.speed;else this.x+=dt*this.speed;if(this.x>canvasWidth)this.x=-this.spriteWidth+5;if(this.x<-this.spriteWidth)this.x=canvasWidth-5}},{key:"render",value:function render(){if(this.flip){ctx.save();ctx.translate(this.x+50,0);ctx.scale(-1,1);ctx.translate(-this.x-50,0);ctx.drawImage(Resources.get(this.sprite),this.x,this.y);ctx.restore()}else{_get(Enemy.prototype.__proto__||Object.getPrototypeOf(Enemy.prototype),"render",this).call(this)}}}]);return Enemy}(_Thang3.default);exports.default=Enemy},{"./Thang":5}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(global,player){var doc=global.document,win=global.window,canvas=doc.createElement("canvas"),ctx=canvas.getContext("2d"),lastTime;var initialized=false;canvas.width=505;canvas.height=606;doc.body.appendChild(canvas);ctx.font="24px Georgia";function main(){var now=Date.now(),dt=(now-lastTime)/1e3;ctx.clearRect(0,0,canvas.width,canvas.height);ctx.strokeRect(0,0,canvas.width,canvas.height);update(dt);render();lastTime=now;win.requestAnimationFrame(main)}function init(){reset();lastTime=Date.now();if(!initialized)startMenu();else main()}function update(dt){updateEntities(dt);if(player.dead){reset();player.dead=false}if(!powerup){if(Math.random()<.02){var clr=Math.random();if(clr<.33)powerup=new _Gem2.default(Math.random()*(canvasWidth-100),Math.random()*(canvasHeight-200)+25,0,"images/gem-blue.png");else if(clr<.66)powerup=new _Gem2.default(Math.random()*(canvasWidth-100),Math.random()*(canvasHeight-200)+25,0,"images/gem-green.png");else powerup=new _Gem2.default(Math.random()*(canvasWidth-100),Math.random()*(canvasHeight-200)+25,0,"images/gem-orange.png")}}else{powerup.update()}}function updateEntities(dt){_app.allEnemies.forEach(function(enemy){enemy.update(dt)});player.update(dt)}function render(){var rowImages=["images/water-block.png","images/grass-block.png","images/stone-block.png","images/stone-block.png","images/stone-block.png","images/grass-block.png"],numRows=6,numCols=5,row,col;for(row=0;row<numRows;row++){for(col=0;col<numCols;col++){ctx.drawImage(Resources.get(rowImages[row]),col*101,row*83)}}renderEntities();if(powerup)powerup.render();ctx.fillText("Score: "+player.score,20,20)}function renderEntities(){_app.allEnemies.forEach(function(enemy){enemy.render()});player.render()}function reset(){if(player)player.reset()}Resources.load(["images/stone-block.png","images/water-block.png","images/grass-block.png","images/enemy-bug.png","images/enemy-bug-flipped.png","images/char-boy.png","images/char-boy2.png","images/menu.png","images/char-cat-girl.png","images/char-horn-girl.png","images/char-pink-girl.png","images/char-princess-girl.png","images/arrow.png","images/gem-blue.png","images/gem-green.png","images/gem-orange.png"]);Resources.onReady(init);global.ctx=ctx;global.canvasWidth=canvas.width;global.canvasHeight=canvas.height;var arrowLoc={x:14,y:100};function startMenu(){var girl1Rect={x1:20,y1:196,x2:85,y2:258};var girl2Rect={x1:216,y1:196,x2:281,y2:258};var girl3Rect={x1:406,y1:196,x2:471,y2:258};var boy1Rect={x1:126,y1:452,x2:191,y2:514};var boy2Rect={x1:346,y1:452,x2:411,y2:514};function isInside(pos,rect){return pos.x<rect.x2&&pos.x>rect.x1&&pos.y>rect.y1&&pos.y<rect.y2}var onclick=function onclick(e){var pos=getMousePos(e);if(isInside(pos,girl1Rect))player=new _Player2.default("images/char-cat-girl.png",15,600);else if(isInside(pos,girl2Rect))player=new _Player2.default("images/char-horn-girl.png",20,700);else if(isInside(pos,girl3Rect))player=new _Player2.default("images/char-pink-girl.png",25,900);else if(isInside(pos,boy1Rect))player=new _Player2.default("images/char-boy.png",10,500);else if(isInside(pos,boy2Rect))player=new _Player2.default("images/char-boy2.png",5,700);if(player){initialized=true;canvas.removeEventListener("click",onclick);canvas.removeEventListener("mousemove",onmousemove);init()}};canvas.addEventListener("click",onclick);var onmousemove=function onmousemove(e){var pos=getMousePos(e);if(isInside(pos,girl1Rect))arrowLoc={x:14,y:100};else if(isInside(pos,girl2Rect))arrowLoc={x:210,y:100};else if(isInside(pos,girl3Rect))arrowLoc={x:400,y:100};else if(isInside(pos,boy1Rect))arrowLoc={x:120,y:358};else if(isInside(pos,boy2Rect))arrowLoc={x:340,y:358}};canvas.addEventListener("mousemove",onmousemove);menuLoop()}function menuLoop(){ctx.fillRect(0,0,canvas.width,canvas.height);ctx.strokeStyle="#FFF";var menu=Resources.get("images/menu.png");var girl1=Resources.get("images/char-cat-girl.png");var girl2=Resources.get("images/char-horn-girl.png");var girl3=Resources.get("images/char-pink-girl.png");var boy1=Resources.get("images/char-boy.png");var boy2=Resources.get("images/char-boy2.png");var arrow=Resources.get("images/arrow.png");ctx.drawImage(menu,0,0);ctx.drawImage(arrow,arrowLoc.x,arrowLoc.y);ctx.drawImage(girl1,4,124);ctx.drawImage(girl2,200,124);ctx.drawImage(girl3,390,124);ctx.drawImage(boy1,110,380);ctx.drawImage(boy2,330,380);if(initialized)return;else requestAnimationFrame(menuLoop)}function getMousePos(e){var rect=canvas.getBoundingClientRect();return{x:e.clientX-rect.left,y:e.clientY-rect.top}}};var _Player=require("./Player.js");var _Player2=_interopRequireDefault(_Player);var _Gem=require("./Gem.js");var _Gem2=_interopRequireDefault(_Gem);var _app=require("./app.js");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}},{"./Gem.js":3,"./Player.js":4,"./app.js":6}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _Thang2=require("./Thang.js");var _Thang3=_interopRequireDefault(_Thang2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Gem=function(_Thang){_inherits(Gem,_Thang);function Gem(xc,yc,spd,spr){_classCallCheck(this,Gem);var _this=_possibleConstructorReturn(this,(Gem.__proto__||Object.getPrototypeOf(Gem)).call(this,xc,yc,spd,spr));_this.hitbox={minx:18,miny:70,maxx:84,maxy:150};return _this}return Gem}(_Thang3.default);exports.default=Gem},{"./Thang.js":5}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _Thang2=require("./Thang.js");var _Thang3=_interopRequireDefault(_Thang2);var _app=require("./app.js");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Player=function(_Thang){_inherits(Player,_Thang);function Player(sprite,hop,spd){_classCallCheck(this,Player);var _this=_possibleConstructorReturn(this,(Player.__proto__||Object.getPrototypeOf(Player)).call(this,200,400,spd,sprite));_this.status="idle";_this.hitbox={minx:18,miny:90,maxx:84,maxy:139};_this.dead=false;_this.hopHeight=hop;_this.lastIdlePos={x:200,y:400};_this.score=0;Array.prototype.forEach.call(document.querySelectorAll("#controls img"),function(arrow){arrow.addEventListener("click",function(evt){return _this.handleInput(evt.target.id)});arrow.addEventListener("touchend",function(evt){console.log("touched key");_this.handleInput(evt.target.id)})});document.addEventListener("keyup",function(e){var allowedKeys={37:"left",38:"up",39:"right",40:"down"};_this.handleInput(allowedKeys[e.keyCode])});return _this}_createClass(Player,[{key:"reset",value:function reset(){this.x=200;this.y=400}},{key:"update",value:function update(dt){var collision=this.detectCollisions();if(powerup&&collision==="powerup"){if(powerup.sprite.indexOf("green")>2)this.score+=1;else if(powerup.sprite.indexOf("blue")>2)this.score+=3;else if(powerup.sprite.indexOf("orange")>2)this.score+=5;powerup=null}else if(collision==="enemy"||this.y<0){this.dead=true;this.status="idle";this.score-=5;if(this.score<0)this.score=0;return}var deltaX=0;var delta=0;if(this.status==="hoppingLeft"){this.x-=this.speed*dt;deltaX=50-(this.lastIdlePos.x-this.x);this.y=this.lastIdlePos.y-this.hopHeight*Math.cos(Math.PI*deltaX/50);if(this.x<=this.lastIdlePos.x-100){this.x=this.lastIdlePos.x=this.lastIdlePos.x-100;this.y=this.lastIdlePos.y;this.status="idle"}}else if(this.status==="hoppingRight"){this.x+=this.speed*dt;deltaX=50-(this.x-this.lastIdlePos.x);this.y=this.lastIdlePos.y-this.hopHeight*Math.cos(Math.PI*deltaX/50);if(this.x>=this.lastIdlePos.x+100){this.x=this.lastIdlePos.x=this.lastIdlePos.x+100;this.y=this.lastIdlePos.y;this.status="idle"}}else if(this.status==="hoppingUp"){this.y-=this.speed*dt;delta=this.lastIdlePos.y-this.y;this.x=this.lastIdlePos.x+.5*this.hopHeight*Math.cos(Math.PI*delta/90);if(this.y<=this.lastIdlePos.y-90){this.y=this.lastIdlePos.y=this.lastIdlePos.y-90;this.x=this.lastIdlePos.x;this.status="idle"}}else if(this.status==="hoppingDown"){this.y+=this.speed*dt;delta=this.lastIdlePos.y-this.y;this.x=this.lastIdlePos.x-.5*this.hopHeight*Math.cos(Math.PI*delta/90);if(this.y>=this.lastIdlePos.y+90){this.y=this.lastIdlePos.y=this.lastIdlePos.y+90;this.x=this.lastIdlePos.x;this.status="idle"}}}},{key:"handleInput",value:function handleInput(key){if(!key||this.status!="idle")return;if(key==="left"&&this.x>10)this.status="hoppingLeft";if(key==="right"&&this.x+this.hitbox.maxx<canvasWidth-50)this.status="hoppingRight";if(key==="up"&&this.y>0)this.status="hoppingUp";if(key==="down"&&this.y+this.hitbox.maxy<canvasHeight-100)this.status="hoppingDown";this.lastIdlePos.x=this.x;this.lastIdlePos.y=this.y}},{key:"detectCollisions",value:function detectCollisions(){if(powerup){if(this.x+this.hitbox.maxx>powerup.x+powerup.hitbox.minx&&this.x+this.hitbox.minx<powerup.x+powerup.hitbox.maxx&&this.y+this.hitbox.maxy>powerup.y+powerup.hitbox.miny&&this.y+this.hitbox.miny<powerup.y+powerup.hitbox.maxy){return"powerup"}}for(var i in _app.allEnemies){if(_app.allEnemies.hasOwnProperty(i)){var en=_app.allEnemies[i];if(this.x+this.hitbox.maxx>en.x+en.hitbox.minx&&this.x+this.hitbox.minx<en.x+en.hitbox.maxx&&this.y+this.hitbox.maxy>en.y+en.hitbox.miny&&this.y+this.hitbox.miny<en.y+en.hitbox.maxy){return"enemy"}}}return false}}]);return Player}(_Thang3.default);exports.default=Player},{"./Thang.js":5,"./app.js":6}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Thang=function(){function Thang(xc,yc,spd,spr){_classCallCheck(this,Thang);this.sprite=spr;this.x=xc;this.y=yc;this.speed=spd}_createClass(Thang,[{key:"render",value:function render(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)}},{key:"update",value:function update(){}}]);return Thang}();exports.default=Thang},{}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.allEnemies=undefined;var _Thang=require("./Thang.js");var _Thang2=_interopRequireDefault(_Thang);var _Enemy=require("./Enemy.js");var _Enemy2=_interopRequireDefault(_Enemy);var _Gem=require("./Gem.js");var _Gem2=_interopRequireDefault(_Gem);var _Player=require("./Player.js");var _Player2=_interopRequireDefault(_Player);var _Engine=require("./Engine.js");var _Engine2=_interopRequireDefault(_Engine);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var player;var allEnemies=[];var ctr=0;while(ctr<5){if(Math.random()<.5)allEnemies.push(new _Enemy2.default(ctr*100,143+ctr*83%249,150+Math.random()*75,false));else allEnemies.push(new _Enemy2.default(ctr*100,143+ctr*83%249,150+Math.random()*75,true));ctr++}window.powerup=false;exports.allEnemies=allEnemies;window.addEventListener("deviceready",function(){(0,_Engine2.default)(window,player)});(0,_Engine2.default)(window,player)},{"./Enemy.js":1,"./Engine.js":2,"./Gem.js":3,"./Player.js":4,"./Thang.js":5}]},{},[6]);